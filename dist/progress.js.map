{"version":3,"file":"progress.js","sources":["../ts/progress.ts"],"sourcesContent":["export class Progress {\n\n    private readonly _element: HTMLDivElement;\n    private _outer: HTMLDivElement;\n    private _progress_text: HTMLDivElement;\n\n    private _circle_color: string;\n    private _circle_progress_color: string;\n    private _current_progress = 0;\n\n    constructor( element: HTMLDivElement ) {\n\n        this._element = element;\n        this._addChildren();\n        this._getColors();\n\n    }\n\n    private _addChildren() {\n\n        this._element.innerHTML = '<div class=\"outer\"><div class=\"inner\"><div class=\"progress-text\"></div></div></div>';\n        this._outer = this._element.querySelector( '.outer' );\n        this._progress_text = this._element.querySelector( '.progress-text' );\n\n    }\n\n    private _getColors() {\n\n        const color = document.createElement( 'div' );\n        color.classList.add( 'color' );\n        this._element.appendChild( color );\n\n        const style = window.getComputedStyle( color );\n        this._circle_progress_color = style.getPropertyValue( 'background-color' );\n        this._circle_color = style.getPropertyValue( 'color' );\n\n        this._element.removeChild( color );\n\n    }\n\n    private _progress( progress: number ) {\n\n        if ( progress <= 50 ) {\n            this._outer.style.backgroundColor = this._circle_progress_color;\n            this._outer.style.backgroundImage = `linear-gradient(${90+(360*progress/100)}deg, transparent 50%, ${this._circle_color} 50%), linear-gradient(90deg, ${this._circle_color} 50%, transparent 50%)`;\n        }\n        else {\n            this._outer.style.backgroundColor = this._circle_progress_color;\n            this._outer.style.backgroundImage = `linear-gradient(${-90+(360*progress/100)}deg, transparent 50%, ${this._circle_progress_color} 50%), linear-gradient(90deg, ${this._circle_color} 50%, transparent 50%)`;\n        }\n\n        this._progress_text.innerText = `${Math.round(progress)}%`;\n\n    }\n\n    public progress( progress: number ) {\n\n        this._progress( progress );\n        this._current_progress = progress;\n\n    }\n\n    public progress_animate( progress: number, time: number ) {\n\n        this._animate( progress, time, null );\n\n    }\n\n    private _animate( progress, time, start ) {\n\n        const _this = this;\n\n        requestAnimationFrame( function ( timestamp ) {\n\n            if ( start === null ) {\n                start = timestamp;\n                _this._animate( progress, time, start );\n            }\n            else if ( timestamp - start > time ) {\n                console.log( progress );\n                _this.progress( progress );\n            }\n            else {\n                _this._progress( _this._current_progress + ( progress - _this._current_progress ) * ( timestamp - start ) / time );\n                _this._animate( progress, time, start );\n            }\n        });\n\n    }\n\n}"],"names":[],"mappings":"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"}